!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["apm-click"]=t():e["apm-click"]=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/apm-report.ts")}({"./src/apm-report.ts":function(e,t,n){"use strict";n.r(t);var i=n("./src/md5.js"),r=n.n(i),o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};void 0===window.__Fission&&(window.__Fission={});var s=window.__Fission;function c(e){void 0===e&&(e={}),s.queue.push(e)}s.installed||(s.installed=!0,void 0!==s.queue&&Array.isArray(s.queue)||(s.queue=[]),s.queue.__originPush=s.queue.push,s.queue.push=function(e){void 0===e&&(e={});var t,n,i,s,c=function(e){var t,n=e.type,i=e.msg,r=void 0===i?{}:i,s=p[n]||p.custom,c=s.id,a=s.category,u=(new Date).getTime(),d={request_uri:location.href,time_iso:""+u,ip:"",app_key:"web_fission",rate:"1",in_ver:"0",ua:navigator.userAgent,referrer:document.referrer||"",href:location.href,env:"production",app_id:"main.growup.growup-report",command:"",traceid:"",real_request_url:location.href,idc:"",via:"",x_cache:"",x_cache_webcdn:"",server_ip:"",negotiated_protocol:"http",http_code:"200",biz_code:"0",request_method:"0",tunnel:"0",tunnel_sdk:"9001",socket_reused:"0",req_size:"0",recv_size:"0",connect_time:"0",dns_time:"0",request_time:"0",response_time:"0",tls_time:"0",total_time:"0",downgrade:"0",request_traceid:"",exception_msg:"success",activity_id:(null===(t=window.PARAM_CONF.ACTIVITY_ID)||void 0===t?void 0:t.toString())||"0"};return{event_id:c||"infra.statistics.custom",app_info:{app_id:21,platform:5,buvid:l("buvid3")||"",chid:"",brand:"",device_id:"",model:"",osver:"",fts:+l("fts")||0,buvid_shared:"",uid:+l("DedeUserID")||0,api_level:0},runtime_info:{network:0,oid:"",version:"",version_code:"",logver:"0.0.1",abtest:"",ff_version:""},mid:l("DedeUserID")||"0",ctime:u,log_id:"005148",retry_send_count:0,event_category:a||7,app_page_view_info:{event_id_from:"",load_type:0,duration:0,pvstart:u,pvend:0},extended_fields:o(o({},d),r),page_type:1,sn_gen_time:0,upload_time:u}}(e);t=d,n=JSON.stringify(c),i=new XMLHttpRequest,s=t+"?"+function(e){var t=e||{};t.ts=Math.floor((new Date).getTime()/1e3),t.appkey="f5644ba96ef70b2a";var n=[];for(var i in t)n.push(i);n.sort();for(var o=[],s=(i=0,n.length);i<s;i++)o.push(n[i]+"="+encodeURIComponent(t[n[i]]));var c=r()(o.join("&")+"bd0b37ccf5644ba96ef70b2aabde207f");return o.push("sign="+c),o.join("&")}(),i.withCredentials=!0,i.open("POST",s,!0),i.send(n)}),s.custom=c,void 0===window.PARAM_CONF?window.PARAM_CONF={ACTIVITY_ID:"0",REPORT_CLICK:!1,RATE:.2}:window.PARAM_CONF={ACTIVITY_ID:window.PARAM_CONF.ACTIVITY_ID||"0",REPORT_CLICK:window.PARAM_CONF.REPORT_CLICK||!1,RATE:window.PARAM_CONF.RATE||.2},null===window.onerror&&(window.onerror=function(e,t,n,i,r){var o=e;t&&(o+="\n"+t.replace(location.origin,"")),(n||i)&&(o+=":"+n+":"+i);var s=o+", "+(!!r&&!!r.stack&&r.stack.toString()||"");return window.__Fission.queue.push({type:"error",msg:{err:s}}),!1}),null===window.onunhandledrejection&&(window.onunhandledrejection=function(e){if(e.preventDefault(),e){var t=e.reason;try{t=JSON.stringify(e)}catch(e){t="reason can not be stringfied."}c({type:"error",msg:{err:["title: unhandledrejection","msg: "+t].join(" -- ")}})}});var a,u,d=(-1===location.host.indexOf("bilibili.com")?location.protocol+"//"+location.hostname+"/api/x":"https://api.bilibili.com/x")+"/fission-report/infoc",f=["data.bilibili.com","apm-misaka.biliapi.net",d],p={error:{id:"web.fission.error",category:101},click:{id:"web.fission.click",category:102},net:{id:"web.fission.net",category:103},perf:{id:"web.fission.performance",category:104},custom:{id:"web.fission.custom",category:105}};function l(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):0}a=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){return this._method=arguments[0]||"",this._sTime=(new Date).getTime(),a.apply(this,arguments)},u=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){return this.addEventListener("readystatechange",(function(){var e={},t={GET:"0",POST:"1",OPTIONS:"6"};this.getAllResponseHeaders().split("\n").forEach((function(t){var n=t.split(":");n[0]&&n[1]&&(e[n[0].toLowerCase()]=n[1].trim())}));for(var n=!0,i=f.length,r=0;r<i;r++){var o=f[r];if(this.responseURL&&this.responseURL.indexOf(o)>-1){n=!1;break}}if(n&&this.responseURL&&4===this.readyState){var s=e["x-cache-webcdn"],a=e["bili-trace-id"],u=e.idc,d=e["x-cache"],p=e["x-bilibili-key-real-ip"],l=e.via,_={};try{_=this.responseText?JSON.parse(this.responseText):{}}catch(e){}var g=arguments[0]||"",m=window.PARAM_CONF.RATE>Math.random();m&&c({type:"net",msg:{command:this.responseURL,traceid:a,real_request_url:this.responseURL,idc:u,via:l,x_cache:d,x_cache_webcdn:s,server_ip:p,negotiated_protocol:"http",http_code:status.toString(),biz_code:(_.code||0).toString(),request_method:t[this._method],tunnel:"0",tunnel_sdk:"9001",socket_reused:"0",req_size:JSON.stringify(g).length.toString(),recv_size:JSON.stringify(_).length.toString(),connect_time:"0",dns_time:"0",request_time:"0",response_time:"0",tls_time:"0",total_time:((new Date).getTime()-this._sTime).toString(),downgrade:"0",request_traceid:"",exception_msg:_.message||""}})}}),!1),u.call(this,e)},function(){if(window.addEventListener("load",(function(){try{setTimeout((function(){!function(){var e={navigationStart:0};window.performance&&window.performance.timing&&window.performance.timing.toJSON&&(e=window.performance.timing.toJSON());var t=window.__fissionTiming?window.__fissionTiming.firstscreenfinish:0,n=o(o({},e),{loadfirstscreen:t-e.navigationStart});c({type:"perf",msg:{"performance.timing":JSON.stringify(o({},n))}})}()}),200),window.PARAM_CONF.REPORT_CLICK&&(document.onclick=function(e){var t;window.__Fission.custom({type:"click",msg:{screen_width:screen.width.toString(),screen_height:screen.height.toString(),x:e.pageX.toString(),y:e.pageY.toString(),activity_id:(null===(t=window.PARAM_CONF.ACTIVITY_ID)||void 0===t?void 0:t.toString())||"0"}})})}catch(e){}})),s.queue.length)for(var e=s.queue.length,t=0;t<e;t++){c(s.queue.shift())}}()},"./src/md5.js":function(e,t,n){var i;!function(r){"use strict";function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,i,r,s){return o((c=o(o(t,e),o(i,s)))<<(a=r)|c>>>32-a,n);var c,a}function c(e,t,n,i,r,o,c){return s(t&n|~t&i,e,t,r,o,c)}function a(e,t,n,i,r,o,c){return s(t&i|n&~i,e,t,r,o,c)}function u(e,t,n,i,r,o,c){return s(t^n^i,e,t,r,o,c)}function d(e,t,n,i,r,o,c){return s(n^(t|~i),e,t,r,o,c)}function f(e,t){var n,i,r,s,f;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var p=1732584193,l=-271733879,_=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)i=p,r=l,s=_,f=g,p=c(p,l,_,g,e[n],7,-680876936),g=c(g,p,l,_,e[n+1],12,-389564586),_=c(_,g,p,l,e[n+2],17,606105819),l=c(l,_,g,p,e[n+3],22,-1044525330),p=c(p,l,_,g,e[n+4],7,-176418897),g=c(g,p,l,_,e[n+5],12,1200080426),_=c(_,g,p,l,e[n+6],17,-1473231341),l=c(l,_,g,p,e[n+7],22,-45705983),p=c(p,l,_,g,e[n+8],7,1770035416),g=c(g,p,l,_,e[n+9],12,-1958414417),_=c(_,g,p,l,e[n+10],17,-42063),l=c(l,_,g,p,e[n+11],22,-1990404162),p=c(p,l,_,g,e[n+12],7,1804603682),g=c(g,p,l,_,e[n+13],12,-40341101),_=c(_,g,p,l,e[n+14],17,-1502002290),p=a(p,l=c(l,_,g,p,e[n+15],22,1236535329),_,g,e[n+1],5,-165796510),g=a(g,p,l,_,e[n+6],9,-1069501632),_=a(_,g,p,l,e[n+11],14,643717713),l=a(l,_,g,p,e[n],20,-373897302),p=a(p,l,_,g,e[n+5],5,-701558691),g=a(g,p,l,_,e[n+10],9,38016083),_=a(_,g,p,l,e[n+15],14,-660478335),l=a(l,_,g,p,e[n+4],20,-405537848),p=a(p,l,_,g,e[n+9],5,568446438),g=a(g,p,l,_,e[n+14],9,-1019803690),_=a(_,g,p,l,e[n+3],14,-187363961),l=a(l,_,g,p,e[n+8],20,1163531501),p=a(p,l,_,g,e[n+13],5,-1444681467),g=a(g,p,l,_,e[n+2],9,-51403784),_=a(_,g,p,l,e[n+7],14,1735328473),p=u(p,l=a(l,_,g,p,e[n+12],20,-1926607734),_,g,e[n+5],4,-378558),g=u(g,p,l,_,e[n+8],11,-2022574463),_=u(_,g,p,l,e[n+11],16,1839030562),l=u(l,_,g,p,e[n+14],23,-35309556),p=u(p,l,_,g,e[n+1],4,-1530992060),g=u(g,p,l,_,e[n+4],11,1272893353),_=u(_,g,p,l,e[n+7],16,-155497632),l=u(l,_,g,p,e[n+10],23,-1094730640),p=u(p,l,_,g,e[n+13],4,681279174),g=u(g,p,l,_,e[n],11,-358537222),_=u(_,g,p,l,e[n+3],16,-722521979),l=u(l,_,g,p,e[n+6],23,76029189),p=u(p,l,_,g,e[n+9],4,-640364487),g=u(g,p,l,_,e[n+12],11,-421815835),_=u(_,g,p,l,e[n+15],16,530742520),p=d(p,l=u(l,_,g,p,e[n+2],23,-995338651),_,g,e[n],6,-198630844),g=d(g,p,l,_,e[n+7],10,1126891415),_=d(_,g,p,l,e[n+14],15,-1416354905),l=d(l,_,g,p,e[n+5],21,-57434055),p=d(p,l,_,g,e[n+12],6,1700485571),g=d(g,p,l,_,e[n+3],10,-1894986606),_=d(_,g,p,l,e[n+10],15,-1051523),l=d(l,_,g,p,e[n+1],21,-2054922799),p=d(p,l,_,g,e[n+8],6,1873313359),g=d(g,p,l,_,e[n+15],10,-30611744),_=d(_,g,p,l,e[n+6],15,-1560198380),l=d(l,_,g,p,e[n+13],21,1309151649),p=d(p,l,_,g,e[n+4],6,-145523070),g=d(g,p,l,_,e[n+11],10,-1120210379),_=d(_,g,p,l,e[n+2],15,718787259),l=d(l,_,g,p,e[n+9],21,-343485551),p=o(p,i),l=o(l,r),_=o(_,s),g=o(g,f);return[p,l,_,g]}function p(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function _(e){var t,n,i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return i}function g(e){return unescape(encodeURIComponent(e))}function m(e){return function(e){return p(f(l(e),8*e.length))}(g(e))}function h(e,t){return function(e,t){var n,i,r=l(e),o=[],s=[];for(o[15]=s[15]=void 0,r.length>16&&(r=f(r,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],s[n]=1549556828^r[n];return i=f(o.concat(l(t)),512+8*t.length),p(f(s.concat(i),640))}(g(e),g(t))}function v(e,t,n){return t?n?h(t,e):_(h(t,e)):n?m(e):_(m(e))}void 0===(i=function(){return v}.call(t,n,t,e))||(e.exports=i)}()}})}));